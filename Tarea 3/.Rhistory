library(tidyverse)
stock = read_tsv("Stock201NBBO.txt")
View(stock)
stock = read_tsv("Stock3LOB.txt")
library(tidyverse)
stock = read_tsv("Stock3LOB.txt")
stock = read_tsv("Stock201NBBO.txt")
View(stock)
library(tidyverse)
stock = read_tsv("Stock201NBBO.txt")
stock = read_tsv("Stock1.txt")
View(stock)
stockNBBO = read_tsv("Stock1NBBO.txt")
stockt = merge(stock, stockNBBO)
View(stockt)
View(stock)
View(stockNBBO)
stock = read_tsv("Stock1.txt")
stockNBBO = read_tsv("Stock1NBBO.txt")
authors <- data.frame(
surname = c("Tukey", "Venables", "Tierney", "Ripley", "McNeil"),
nationality = c("US", "Australia", "US", "UK", "Australia"),
retired = c("yes", rep("no", 4)))
books <- data.frame(
name = c("Tukey", "Venables", "Tierney", "Ripley", "Ripley", "McNeil"),
title = c("Exploratory Data Analysis",
"Modern Applied Statistics ...",
"LISP-STAT",
"Spatial Statistics", "Stochastic Simulation",
"Interactive Data Analysis"),
other.author = c(NA, "Ripley", NA, NA, NA, NA))
View(authors)
View(books)
merge(authors, books, by.x="surname", by.y="name")
merge(books, authors, by.x="name", by.y="surname")
authors <- data.frame(
surname = c("Tukey", "Venables",  "Ripley", "McNeil"),
nationality = c("US",  "US", "UK", "Australia"),
retired = c("yes", rep("no", 4)))
authors <- data.frame(
surname = c("Tukey", "Venables",  "Ripley", "McNeil"),
nationality = c("US",  "US", "UK", "Australia"),
retired = c("yes", rep("no", 3)))
merge(authors, books, by.x="surname", by.y="name")
merge(books, authors, by.x="name", by.y="surname")
View(stock)
stock_tot = merge(stock, stockNBBO, by.x="time", by.y="time")
View(stock_tot)
View(stockNBBO)
View(stock)
View(stock)
View(stockNBBO)
stock_tot = merge(stock, stockNBBO, by=c("day","time"))
View(stock_tot)
?inner_join
stock_tot = inner_join(stock, stockNBBO, by=c("day","time"))
View(stock_tot)
stock_tot = inner_join(stockNBBO, stock[5], by=c("day","time"))
stock[5]
stock_tot = inner_join(stockNBBO, stock[,c(1,2,5)], by=c("day","time"))
stock_tot[1]
View(stock_tot)
stock_tot[1]
View(stock)
View(stockNBBO)
View(stock)
lenght(stock_tot)
lenght(stock_tot[,1])
nrow(stock_tot)
i=1
(stock_tot$ask[i] - stock_tot[i,6]) - (stock_tot$ask[i-1] - stock_tot[i,6])
stock_tot[i,6] = (stock_tot$bid[i] + stock_tot$ask[i]) / 2
(stock_tot$ask[i] - stock_tot[i,6])
(stock_tot$ask[i-1] - stock_tot[i,6])
i=2
stock_tot[i,6] = (stock_tot$bid[i] + stock_tot$ask[i]) / 2
(stock_tot$ask[i] - stock_tot[i,6])
(stock_tot$ask[i-1] - stock_tot[i,6])
(stock_tot$ask[i] - stock_tot[i,6]) - (stock_tot$ask[i-1] - stock_tot[i,6])
(stock_tot$ask[i] - stock_tot[i,6])
(stock_tot[i,6] - stock_tot$bid[i])
(stock_tot$ask[i] - stock_tot[i,6]) + (stock_tot[i,6] - stock_tot$bid[i])
for(i in 1:nrow(stock_tot)){
stock_tot[i,6] = (stock_tot$bid[i] + stock_tot$ask[i]) / 2
if(stock_tot$buysell[i] == 1){
if(stock_tot$buysell[i-1] == 1){
stock_tot[i,7] = (stock_tot$ask[i] - stock_tot[i,6]) - (stock_tot$ask[i-1] - stock_tot[i,6])
}else{stock_tot[i,7] = (stock_tot$ask[i] - stock_tot[i,6]) + (stock_tot[i,6] - stock_tot$bid[i-1])}
}else{
if(stock_tot$buysell[i-1] == 1){
stock_tot[i,7] = -(stock_tot[i,6] - stock_tot$bid[i]) - (stock_tot$ask[i-1] - stock_tot[i,6])
}else{stock_tot[i,7] = -(stock_tot[i,6] - stock_tot$bid[i]) + (stock_tot[i,6] - stock_tot$bid[i-1])}
}
print(i)
}
for(i in 2:nrow(stock_tot)){
stock_tot[i,6] = (stock_tot$bid[i] + stock_tot$ask[i]) / 2
if(stock_tot$buysell[i] == 1){
if(stock_tot$buysell[i-1] == 1){
stock_tot[i,7] = (stock_tot$ask[i] - stock_tot[i,6]) - (stock_tot$ask[i-1] - stock_tot[i,6])
}else{stock_tot[i,7] = (stock_tot$ask[i] - stock_tot[i,6]) + (stock_tot[i,6] - stock_tot$bid[i-1])}
}else{
if(stock_tot$buysell[i-1] == 1){
stock_tot[i,7] = -(stock_tot[i,6] - stock_tot$bid[i]) - (stock_tot$ask[i-1] - stock_tot[i,6])
}else{stock_tot[i,7] = -(stock_tot[i,6] - stock_tot$bid[i]) + (stock_tot[i,6] - stock_tot$bid[i-1])}
}
print(i)
}
View(stock_tot)
stock = read_tsv("Stock201.txt")
stockNBBO = read_tsv("Stock201NBBO.txt")
stock_tot = inner_join(stockNBBO, stock[,c(1,2,5)], by=c("day","time"))
for(i in 2:nrow(stock_tot)){
stock_tot[i,6] = (stock_tot$bid[i] + stock_tot$ask[i]) / 2
if(stock_tot$buysell[i] == 1){
if(stock_tot$buysell[i-1] == 1){
stock_tot[i,7] = (stock_tot$ask[i] - stock_tot[i,6]) - (stock_tot$ask[i-1] - stock_tot[i,6])
}else{stock_tot[i,7] = (stock_tot$ask[i] - stock_tot[i,6]) + (stock_tot[i,6] - stock_tot$bid[i-1])}
}else{
if(stock_tot$buysell[i-1] == 1){
stock_tot[i,7] = -(stock_tot[i,6] - stock_tot$bid[i]) - (stock_tot$ask[i-1] - stock_tot[i,6])
}else{stock_tot[i,7] = -(stock_tot[i,6] - stock_tot$bid[i]) + (stock_tot[i,6] - stock_tot$bid[i-1])}
}
print(i)
}
View(stock_tot)
colnames(stock_tot[,c(6,7)]) = c("punto_medio", "diff_precio")
View(stock_tot)
stock_tot[,c(6,7)]
colnames(stock_tot[,c(6,7)])
c("punto_medio", "diff_precio")
colnames(stock_tot[,c(6,7)]) = c("punto_medio", "diff_precio")
View(stock_tot)
= c("punto_medio", "diff_precio")
colnames(stock_tot)
colnames(stock_tot) = c("punto_medio", "diff_precio")
colnames(stock_tot)
colnames(stock_tot) = c("day", "time", "bid", "ask", "buysell", "punto_medio", "diff_precio")
colnames(stock_tot)
colnames(stock_tot) = c("day", "time", "bid", "ask", "buysell", "q", "dif_precio")
?lm
stock_tot$buysell-1
stock_tot$buysell
stock_tot$buysell[-1,]
stock_tot$buysell[-c(1),]
stock_tot$buysell[-1]
lm(stock_tot$dif_precio ~ stock_tot$buysell + stock_tot$buysell[-1])
